---
sidebar_position: 1
---
# Setup

## Installation

`topaz` is available on Linux, macOS and Windows platforms.

* Binaries for Linux, Windows and Mac are available as tarballs in the [release](https://github.com/aserto-dev/topaz-private/releases) page.

* Via Homebrew for macOS or LinuxBrew for Linux

   ```shell
  brew tap aserto-dev/tap && brew install aserto-dev/tap/topaz
   ```

* Via a GO install

  ```shell
  go install github.com/topaz/cmd/topaz@latest
  ```

## Building from source

 `topaz` is currently using go v1.17 or above. In order to build `topaz` from source you must:

 1. Install [mage](https://magefile.org/)
 2. Clone the repo
 3. Build and run the executable

      ```shell
      mage build && ./dist/build_linux_amd64/topaz
      ```

## Running with Docker

  You can run as a Docker container:

  ```shell
  docker run -it --rm ghcr.io/aserto-dev/topaz:latest --help
  ```

## Configuration

Topaz is packaged as a Docker container which requires a configuration file - an example configuration is available [here](/docs/getting-started/configuration). The example configuration file includes the location to a policy image that is store in a policy registry. The policy registry hosts OCI images which you can create and push with the [Policy CLI](https://github.com/opcr-io/policy).

```bash
topaz configure <policy>
```

After creating the configuration file, you can start the container with the following command:

To start Topaz locally, you'll need to have Docker installed and running.

Then, run the following command:
```bash
topaz run <policy>
```

## Loading data

Once Topaz is running, you can load user data into the database using the [Topaz CLI](/docs/command-line-interface/topaz-cli/index):

{/* TODO: CLI Command to load data */}
```
topaz load <path to JSON file>
```

After loading data into your Topaz instance, you'll be able to run the following queries to test the policy:

## List policies

```bash
curl --location --request GET 'https://localhost:8383/api/v2/policies'
```

## Query the policy

```bash
curl --location --request POST 'https://localhost:8383/api/v2/authz/is' \
--header 'Content-Type: application/json' \
--data-raw '{
     "identity_context": {
          "type": "IDENTITY_TYPE_NONE",
          "identity": "rick@the-citadel.com"
     },
     "policy_context": {
          "path": "todoApp.GET.todos",
          "decisions": ["allowed"]

     }
}'
```


## Next steps
1. Review a sample app in your [favorite language](/docs/getting-started/samples/)
2. Create your own [policy](/docs/policies/)
3. Push your policy to a [registry](/docs/policies/lifecycle#policy-cli)
4. Start Topaz by pointing it to your new policy with `topaz run <your-policy>`
