# Versioning

The Topaz CLI provides four commands to manage the version of the `topazd` container image:

```shell
  install            install topaz container
  update             update topaz container version
  uninstall          uninstall topaz container
  version            version information
```

## Install

`topaz install` installs the Topazd container.

To specify the container name and version that `topaz install` pulls, use the following command-line options:

```shell
      --container-registry="ghcr.io/aserto-dev"    container registry (host[:port]/repo) ($CONTAINER_REGISTRY)
      --container-image="topaz"                    container image name ($CONTAINER_IMAGE)
      --container-tag="latest"                     container tag ($CONTAINER_TAG)
      --container-platform="linux/arm64"           container platform ($CONTAINER_PLATFORM)
```

Note: the default values displayed in the help message, are automaticly adopted to the platform of the host machine.

For example the container platform value

| Host OS      | Host Process | Container Platform | 
| ----------- | ------------- | ------------------ |
| Linux       | Intel/AMD x64 | linux/amd64        |
| Linux       | arm64         | linux/arm64        |
| Mac         | Intel x64     | linux/amd64        |
| Mac         | Apple silicon | linux/arm64        |
| Windows     | Intel/AMD x64 | linux/amd64        | 
| Windows     | arm64         | not supported      |

Note: currently there exists no support for running Topaz/Topazd on Windows running on arm64 processors.

## Update

`topaz update` updates the Topazd container to the latest version, unless the `--container-tag` command line argument or `$CONTAINER_TAG` environment variable specifies a different version.

## Uninstall

`topaz uninstall` removes the Topazd container image.

## Version

`topaz version` returns the version of the Topaz CLI. 

`topaz version --container` also returns the version of the Topazd container.

Example:

```shell
topaz 0.32.5 g66b9f1a darwin-arm64 [2024-05-20T18:35:18Z]
topazd 0.32.5
```
NOTE: when the matching container image version is not download yet, the following message will be returned:

```shell
topaz 0.32.5 g66b9f1a darwin-arm64 [2024-05-20T18:35:18Z]
!!! container image "ghcr.io/aserto-dev/topaz:0.32.5" does not exist locally
!!! run 'topaz install' to download
```
